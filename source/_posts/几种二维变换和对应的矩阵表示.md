title: 总结几种二维变换和对应的矩阵表示
date: 2015-11-27 19:53:14
tags:
- 变换
- 矩阵
- 齐次坐标
- 计算机视觉
categories:
- 理论
mathjax: true
---
**矩阵其实代表一种线性变换**，是理解线性代数的核心之一。而线性变换有着各种各样的用途，所以矩阵这种人造产物又有了许多新的意义。
不同的矩阵代表不同变换，许多变换都有统一的特征，可以归为一类；若把矩阵看成多个列向量的罗列，则更容易理解。这里简单总结几种常见的二维变换，及对应的矩阵方程。
##齐次坐标
将各种的变换表达成矩阵的形式，需要引入**齐次坐标 Homogeneous coordinates**的概念。
- 构建齐次坐标：在普通坐标中增加一个泛化的常数项，一般为1。 
{% raw %}
$$
二维：(x,y)\Rightarrow\left(\begin{array}{c}
x \\
y \\
1
\end{array}
\right),
\quad 三维： (x,y,z) \Rightarrow \left(\begin{array}{c}
x\\
y\\
z\\1
\end{array}\right)
$$
- 转换成欧式坐标：
$$二维：
\left(\begin{array}{c}x\\y\\w
\end{array}\right) \Rightarrow (\frac{x}{w},\frac{y}{w})，
\quad 三维：
\left(\begin{array}{c}x\\y\\z\\w
\end{array}\right) \Rightarrow (\frac{x}{w},\frac{y}{w},\frac{z}{w})
$$
{% endraw %}
- 意义主要有两个方面: 
1. 一个是在射影空间中代表无穷远。射影空间相较于欧式空间引入了无穷远的概念，即无穷远点，无穷远直线等，这些**无穷远点的齐次坐标最后一位是0,而有限点最后一位是1**，这些是射影几何中的概念，最后有个例子，这里不详细讨论。
2. 另一点就是方便运算，通过引入齐次坐标可以简单的将[加法](#add)和[除法](dev)通过矩阵相乘的方式表示，后面的例子会有印证。
---
##几种二维变换
- 简述：
	- 随范围的递增，主要有四种变换类型：欧式变换群，相似变换群，仿射变换群，射影变换群。
	- 这些变换都是二维坐标的变换，是一种一矩阵形式体现的广义线性变换。
	- 这些变换基本上由几种原子变换组成：平移，旋转，伸缩
- <text id = "add">几种原子变换<text>：
	- 平移 Translation
![](http://7xjz3b.com1.z0.glb.clouddn.com/translate.jpg)
{% raw %}
$$坐标方程： 
\begin{align*}
x'= x+t_x\\
y'=y+y_x
\end{align*}
，
\quad 转换矩阵:
\begin{bmatrix}
x'\\y'\\1
\end{bmatrix}=
\begin{bmatrix}1&0&t_x\\0&1&t_y\\0&0&1\end{bmatrix}
\begin{bmatrix}x\\y\\1\end{bmatrix}
$$
{% endraw %}
这里体现了齐次坐标**方便计算加减法的性质。**
	- 伸缩 scale
![](http://7xjz3b.com1.z0.glb.clouddn.com/scale.jpg)
{% raw %}
$$坐标方程： 
\begin{align*}
x'= sx\\
y'=sy
\end{align*}
,
\quad\quad 转换矩阵:
\begin{bmatrix}
x'\\y'\\1
\end{bmatrix}=
\begin{bmatrix}s&0&0\\0&s&0\\0&0&1\end{bmatrix}
\begin{bmatrix}x\\y\\1\end{bmatrix}
$$
{% endraw %}
	- 旋转 rotation
旋转的角度$\theta$默认是逆时针方向。
![](http://7xjz3b.com1.z0.glb.clouddn.com/rotation.jpg)
{% raw %}
$$坐标方程： 
\begin{align*}
x'= x\cos\theta-y\sin\theta\\
y'=x\sin\theta+y\cos\theta
\end{align*}
,
\quad\quad 转换矩阵:
\begin{bmatrix}
x'\\y'\\1
\end{bmatrix}=
\begin{bmatrix}\cos\theta&-\sin\theta&0\\\sin\theta&\cos\theta&0\\0&0&1\end{bmatrix}
\begin{bmatrix}x\\y\\1\end{bmatrix}
$$
{% endraw %}

###欧式变换 (Euclidean transformations)：
- 组成：旋转+平移。 （该图例为先旋转，再平移）
- 3自由度：1旋转，2平移 （自由度即影响矩阵的自由数的个数，这里有一个角度，xy两个平移坐标, 关系到空间中至少需要几个不相关的点可以描述一个变换）
- 不变量：长度，角度，面积，点线关系
![](http://7xjz3b.com1.z0.glb.clouddn.com/Euclid1.jpg)
- 表示：
{% raw %}
欧式坐标方程：
$$
x' = x_i\cos\theta-y_i\sin\theta+t_x\\
y' = x_i\sin\theta+y_i\cos\theta+t_y\\
$$
齐次坐标矩阵表示
$$
\begin{bmatrix}
x'\\y'\\1
\end{bmatrix}=
\begin{bmatrix}\cos\theta&-\sin\theta&t_x\\\sin\theta&\cos\theta&t_y\\0&0&1\end{bmatrix}
\begin{bmatrix}x\\y\\1\end{bmatrix}\\ 
$$
化简，设p为原向量,$H_E$为变换矩阵
$$
p' = H_Ep = \begin{bmatrix}R&t\\0^\mathrm{T}&1\end{bmatrix}p, 其中旋转矩阵R是正交矩阵
$$
{% endraw %}

###相似变换 (Similiarity transformations)：
- 组成：尺度因子+旋转+平移
- 4自由度：1尺度，1旋转，2平移 
- 不变量：长度比，角度，面积比，点线关系
![](http://7xjz3b.com1.z0.glb.clouddn.com/similarity1.jpg)
- 表示：
{% raw %}
欧式坐标方程（a(x,y)为原向量）：
$$
a' = sRa+t
$$
齐次坐标矩阵表示：
$$
\begin{bmatrix}
x'\\y'\\1
\end{bmatrix}=
\begin{bmatrix}s\cos\theta&-s\sin\theta&t_x\\s\sin\theta&s\cos\theta&t_y\\0&0&1\end{bmatrix}
\begin{bmatrix}x\\y\\1\end{bmatrix}\\ 
$$
化减，设p为原向量的齐次坐标,$H_s$为变换矩阵
$$
p' = H_sp = \begin{bmatrix}sR&t\\0^\mathrm{T}&1\end{bmatrix}p, 其中旋转矩阵R是正交矩阵
$$
{% endraw %}

###仿射变换 (Affine transformations)：
- 组成：非均匀缩放。是相似变换的推广，使夹角不再保持不变；仿射变换对平面的作用是均匀的。
- 6自由度：2尺度，2旋转，2平移 
- 不变量：平行线，平行线段长度比，面积比，点线关系
- 点的转换：经过仿射变换，有限点只能转换成有限点，但无穷远点只能还是无穷远点（通过转换矩阵揭示）。
![图和方程无关](http://7xjz3b.com1.z0.glb.clouddn.com/affine.jpg)
- 表示：
{% raw %}
欧式坐标方程（a(x,y)为原向量）：
$$
a' = Aa+t
$$
化简，设p为原向量的齐次坐标向量,$H_A$为变换矩阵
$$
p' = H_Ap = Ap+t = \begin{bmatrix}A&t\\0^\mathrm{T}&1\end{bmatrix}p
$$
其中
$$
A = R(\theta)R(-\varphi)DR(\varphi), \quad D= \left(\begin{array}{cc}\lambda_1&0\\0&\lambda_2\end{array}\right)\\
$$
同时
$$
A = UDV^\mathrm{T} = (UV^\mathrm{T})(VDV^\mathrm{T})=R(\theta)R(-\varphi)DR(\varphi)
$$
{% endraw %}

###射影变换 (Projective transformations)：
- 组成：需要对射影几何中各概念详细理解
- 8自由度：2维中变换矩阵是3x3的，除了泛化的常数$H_{33}=1$,其他均自由 
- 不变量：交比，射影空间中概念，射影空间中交比不变，点线关系
- 点的转换：经过仿射变换，有限点可以被转换成无穷远点，但**无穷远点可以转换为有限点**。
![](http://7xjz3b.com1.z0.glb.clouddn.com/project.jpg)
- 表示：
欧式坐标方程（a(x,y)为原向量）：
{% raw %}
$$
a'=\frac{Aa+t}{c^\mathrm{T}a+1}，\quad 
 \begin{bmatrix}a'\\1\end{bmatrix}\sim\begin{bmatrix}A&t\\c^\mathrm{T}&1\end{bmatrix}\begin{bmatrix}a\\1\end{bmatrix}
$$
<text id = "dev">用$\sim$的原因是经过射影变换齐次坐标的常数项会发生变化。<text>
这里也体现齐次坐标方便了**除法**的运算，通过矩阵影响齐次坐标最后的常数，通过齐次坐标与欧式坐标的转换$\left(\begin{array}{c}x\\y\\w
\end{array}\right) \Rightarrow (\frac{x}{w},\frac{y}{w})$，完成除法运算。
$$
$$
化为齐次坐标和矩阵表示,经过射影转换后，齐次坐标最后一项不一定为1：
$$
\begin{bmatrix}
x'\\y'\\w
\end{bmatrix}=
\begin{bmatrix}h_{11}&h_{12}&h_{13}\\h_{21}&h_{22}&h_{23}\\h{31}&h{32}&h{33}\end{bmatrix}
\begin{bmatrix}x\\y\\1\end{bmatrix}\\ 
$$
化简，设p为原向量的齐次坐标，$H_p$为变换矩阵
$$
p' = H_pp = \begin{bmatrix}A&t\\c^\mathrm{T}&b\end{bmatrix}p\sim\begin{bmatrix}A&t\\c^\mathrm{T}&1\end{bmatrix}p
$$
射影变换与仿射变换根本别在于： $c^\mathrm{T}\neq 0$，因此，对于无穷远点$\left(\begin{array}{c}x\\y\\0\end{array}\right)$，经过仿射变换后齐次坐标变为$\left(\begin{array}{c}x\\y\\c_1x+c_2y\end{array}\right)$，如此将无穷远点转化为有限点。
{% endraw %}
---
-Robin
December 7, 2015 4:52 PM